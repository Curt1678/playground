<head>

<link href="https://fonts.googleapis.com/css?family=Mina" rel="stylesheet">

<style>

button[onclick="backgroundReturn()"] {display: none;}

.container {margin:5% 10%; padding: 20px; border: 1px solid #cdcdcd; font-family: 'Mina', sans-serif; border-radius: 5px;}

h1 {text-align: center;}

td {width:30px;height:30px;border:1px solid black;}

.arrayInput {width:50px;}

.centered {text-align:center;}

.blackText {color: #000;}

.smallInput {width:50px;}

.factorResult {border:none;width:500px;background:#fff;font-weight:bold;}

.error {opacity: 0; font-weight: 600; color: #ff0000;}
.errorTrigger { animation-name: errorFade; animation-duration: 0.25s; }

@keyframes errorFade {
	0% {opacity: 1;}
	100% {opacity: 0;}
}

#rangeReader1, #rangeReader2, #rangeReader3 {
	border: none;
	width: 50px;
	text-align: center;
}

div#xmasTree {text-align:center; width: 500px; line-height: 10%;}

#fizzBuzzUpTo {width: 346px}

#xmasHeight {width: 34px;}

input#radiusInput {border: 1px solid #cdcdcd;}


</style>

<style id="colorChangeKeyframe"></style>

<style id="backgroundColor">
	.container {
		animation-name: colorCycle;
		animation-iteration-count: infinite;
	}
</style>
<style id="seizureControl">
	.container {
		animation-duration: 20s;
	}
</style>
<style id="textColor">
	.container:not(input){color: #000;}
</style>
<script>

window.addEventListener('load',colorChangeKeyframe());

function colorChangeKeyframe(){
	let styleTag = document.querySelector('style#colorChangeKeyframe');

	styleTag.innerHTML += "@keyframes colorCycle {";
	
	for(i=0; i<100.5; i+=0.5){
		styleTag.innerHTML += i + "% {background-color:hsl(" + (i/100)*360 + ", 70%, 70%)}";
	}
	
	styleTag.innerHTMl += "}";
}

function calculate(val){
	if (val !== ''){
		if (Number.isInteger(parseInt(val))){
			if (parseInt(val)%4 == 0){
				if (parseInt(val)%400 == 0){
					return "Leap Year!";
				}
				if (parseInt(val)%100 == 0){
					return "Not a Leap Year!";
				}
				return "Leap Year!";
			}
		} else {return "Not a year!"}
	} else {return "Please input a year."}	
}

function fill(){
document.querySelector('#output').value = calculate(document.querySelector('#input').value);}

function multiply(){
	document.querySelector('#result').value = parseInt(document.querySelector('#one').value) * parseInt(document.querySelector('#two').value);
}
function divide(){
	document.querySelector('#result').value = parseInt(document.querySelector('#one').value) / parseInt(document.querySelector('#two').value);
}

function calcC(){
	let Fval = document.querySelector('#fahrenheit').value;
	document.querySelector('#celsius').value = (5*(Fval-32)/9).toFixed(2);
}

function calcF(){
	let Cval = document.querySelector('#celsius').value;
	document.querySelector('#fahrenheit').value = ((1.8*Cval)+32).toFixed(2);
}

function tableCreate(){
	let rows = parseInt(document.querySelector('#rows').value);
	let columns = parseInt(document.querySelector('#columns').value);
	
	if(isNaN(rows) || isNaN(columns) || rows == 0 || columns == 0){
		document.querySelector('span.error').classList.add('errorTrigger'); 
		setTimeout(function(){document.querySelector('span.error').classList.remove('errorTrigger');}, 250); return;}
	
	let newTable = document.createElement('table');
	
	for (i=0; i<rows; i++){
		newTable.appendChild(document.createElement('tr'));
		}
	
	newTable.childNodes.forEach(function(val){for(i=0;i<columns;i++){
		val.appendChild(document.createElement('td')) 
		}});	
	
	document.querySelector('#tables').appendChild(newTable);
}

function tableDestroy(){
	let numberOfTables = document.querySelectorAll('table').length;
	document.querySelector('#tables table:nth-child(' + numberOfTables +')').outerHTML='';
}

function cut(){
	let startWord = document.querySelector('#wordCutter').value;
	let startWordLength = startWord.length;
	
	if(startWordLength % 2 == 0){
		let firstHalfArr = [];
		let secondHalfArr = [];
		
		for(i=0; i<startWordLength/2; i++){
			firstHalfArr.push(startWord[i]);
			secondHalfArr.unshift(startWord[startWordLength-i-1]);
		}
		
		document.querySelector('#cutResult1').value = firstHalfArr.join('');
		document.querySelector('#cutResult2').value = secondHalfArr.join('');
	} else {
		let firstHalfArr = [];
		let secondHalfArr = [];
		
		for(i=0; i<startWordLength/2; i++){
			firstHalfArr.push(startWord[i]);
			secondHalfArr.unshift(startWord[startWordLength-i]);
		}
		
		document.querySelector('#cutResult1').value = firstHalfArr.join('');
		document.querySelector('#cutResult2').value = secondHalfArr.join('');
	}
}

function remove(){
	let selection = document.querySelector('#mySelect').value;
	document.querySelectorAll('#mySelect option').forEach(function(val){
		if(val.innerHTML==selection){val.outerHTML="";}
	});
}

function add(){
	let addition=document.querySelector("#addToSelect").value;
	
	document.querySelector('#mySelect').appendChild(document.createElement('option')).innerHTML=addition;
}

function arrayHighest(){
	
	let arr = [];
	
	document.querySelectorAll('#arrayLocation input').forEach(
		function(val){
			if(Number.isInteger(parseInt(val.value))){
				arr.push(val.value);
			}
		}
	);
				
	let sorted = arr.sort(function(a,b){return b-a;});
	
	let highest = sorted.shift();
	
	document.querySelector('#arrayHighest').value = highest;
	return;
	
}

function arrayLowest(){
	
	let arr = [];
	
	document.querySelectorAll('#arrayLocation input').forEach(
		function(val){
			if(Number.isInteger(parseInt(val.value))){
				arr.push(val.value);
			}
		}
	);
	
	
				
	let sorted = arr.sort(function(a,b){return a-b;});
	
	let lowest = sorted.shift();
	
	document.querySelector('#arrayLowest').value = lowest;
	return;
	
}

function arrayGen(){
	document.querySelector('#arrayLocation').innerHTML="";
	let elements = document.querySelector('#arraySize').value;
	
	let newElements = [];
	let counter = 0;
	
	for(i=0; i<elements; i++){

		newElements[i] = document.createElement('input');
		
		newElements[i].setAttribute('id','array' + i);
		newElements[i].setAttribute('class','arrayInput');
		newElements[i].setAttribute('type','number');
		
		document.querySelector('span#arrayLocation').appendChild(document.createElement('newElement'));
	}
	newElements.forEach(function(val){
		document.querySelector('#arrayLocation').appendChild(val);
		counter++;
		if (counter < newElements.length){
			document.querySelector('#arrayLocation').innerHTML += ',';
		}
		
	});
}

function getFactors(){

	let input = parseFloat(document.querySelector('#factorInput').value);
	
	console.log(Number.isInteger(input));
	
	if(input <= 0 || !Number.isInteger(input)){
		document.querySelector('#factors').value = "Please input a positive, whole, non-zero number";
		document.querySelector('#perfect').value = "";
		return;
	}
	
	if(input == 1){
		document.querySelector('#factors').value = "1";
		document.querySelector('#perfect').value = "No (doesn't count)";
		return;}
	
	let factors = [];
	
	for(i=1; i<(input/2)+1; i++) {
		if(input%i === 0){
			factors.push(i);
		}
	}
	
	let factorString = factors.join(', ');
	document.querySelector('#factors').value = factorString + ', ' +  input;
	
	let sum = 0;
	
	factors.forEach(function(val){sum+=val;});
	
	if(sum === input){document.querySelector('#perfect').value = "Yes";} else {document.querySelector('#perfect').value = "No";}
}

function romanConvert(){
	let input = parseInt(document.querySelector('#number').value);
	
	let output = "";
	
	while (input >= 1000){input -= 1000; output += "M"}	
	while (input >= 900){input -= 900; output += "CM"}	
	while (input >= 500){input -= 500; output += "D"}	
	while (input >= 400){input -= 400; output += "CD"}	
	while (input >= 100){input -= 100; output += "C"}	
	while (input >= 90){input -= 90; output += "XC"}	
	while (input >= 50){input -= 50; output += "L"}	
	while (input >= 40){input -= 40; output += "XL"}	
	while (input >= 10){input -= 10; output += "X"}	
	while (input >= 9){input -= 9; output += "IX"}	
	while (input >= 5){input -= 5; output += "V"}	
	while (input >= 4){input -= 4; output += "IV"}	
	while (input >= 1){input -= 1; output += "I"}
	
	document.querySelector('#roman').value = output;
	return;
	
}

function numberConvert(){
	let input = document.querySelector('#roman').value;
	
	let output = 0;
	
	for(i=0; i<input.length; i++){
		switch (input[i]) {
			case 'M':
				output += 1000;
				break;				
			case 'D':
				output += 500;
				break;				
			case 'C':
				switch (input[i+1]){
					case 'M':
						output += 900;
						i++;
						break;						
					case 'D':
						output += 400;
						i++;
						break;						
					default:
						output += 100;
						break;
				}
				break;				
			case 'L':
				output += 50;
				break;				
			case 'X':
				switch (input[i+1]){
					case 'C':
						output += 90;
						i++;
						break;						
					case 'L':
						output += 40;
						i++;
						break;						
					default:
						output += 10;
						break;
				}
				break;				
			case 'V':
				output += 5;
				break;				
			case 'I':
				switch (input[i+1]){
					case 'X':
						output += 9;
						i++;
						break;					
					case 'V':
						output += 4;
						i++;
						break;					
					default:
						output += 1;
						break;
				}
				break;				
			default:
				break;
		}
	}	
	document.querySelector('#number').value = output;
}

function fizzBuzz(){

	let output = document.querySelector('#fizzBuzzOutput');
	
	output.innerHTML = "";
	
	let numberOne = parseInt(document.querySelector('#fizzBuzzNumberOne').value);
	let numberTwo = parseInt(document.querySelector('#fizzBuzzNumberTwo').value);
	
	let wordOne = "";
	let wordTwo = "";
	
	
	
	if(document.querySelector('#fizzBuzzWordOne').value != ""){
		wordOne = document.querySelector('#fizzBuzzWordOne').value;
	} else {
		wordOne = "Fizz";
	}
	
	if(document.querySelector('#fizzBuzzWordTwo').value != ""){
		wordTwo = document.querySelector('#fizzBuzzWordTwo').value;
	} else {
		wordTwo = "Buzz";
	}
	
	let upTo = parseInt(document.querySelector('#fizzBuzzUpTo').value);	
	
	for(i=1;i<upTo+1;i++){
		if(i%numberOne == 0 && i%numberTwo != 0){
			document.querySelector('#fizzBuzzOutput').innerHTML += "<b>" + i + "</b>" + ": " + wordOne + "&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp;&nbsp;&nbsp;";
		}
		if(i%numberOne != 0 && i%numberTwo == 0){
			document.querySelector('#fizzBuzzOutput').innerHTML += "<b>" + i + "</b>" + ": " + wordTwo + "&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp;&nbsp;&nbsp;";
		}
		if(i%numberOne == 0 && i%numberTwo == 0){
			document.querySelector('#fizzBuzzOutput').innerHTML += "<b>" + i + "</b>" + ": " + wordOne + wordTwo + "&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp;&nbsp;&nbsp;";
		}
	}
	
	
	
}

function range1(){
	document.querySelector('#rangeReader1').value = document.querySelector('#fizzBuzzNumberOne').value;
}

function range2(){
	document.querySelector('#rangeReader2').value = document.querySelector('#fizzBuzzNumberTwo').value;
}

function range3(){
	document.querySelector('#rangeReader3').value = document.querySelector('#fizzBuzzUpTo').value;
}

function buildXmasTree(){
	let height = parseInt(document.querySelector('#xmasHeight').value);
	let tree = document.querySelector('div#xmasTree');
	
	tree.innerHTML = "";
	
	let leaves = 0;
	
	for(i=1; i<height-1; i++){
		leaves = i;
		tree.innerHTML += "<p>";
		for(j=1; j<leaves+1; j++){
			tree.innerHTML += "  *  ";
		}
		tree.innerHTML += "</p>";
	}
	
	tree.innerHTML += "<p>*</p><p>*****</p>";
}

function changeBackground(){
	let BGcolorTag = document.querySelector('style#backgroundColor');
	
	let color = document.querySelector('input#BGCTag').value;
	
	BGcolorTag.innerHTML = ".container {background-color: " + color + ";}";
	
	document.querySelector('button[onclick="backgroundReturn()"]').style.display="inline";
}

function changeText(){
	let TcolorTag = document.querySelector('style#textColor');
	
	let color = document.querySelector('input#TCTag').value;
	
	TcolorTag.innerHTML = ".container:not(input) {color: " + color + ";}";
}

function changeRadius(){
	let radiusInput = document.querySelector('input#radiusInput').value + "px";
	
	document.querySelector('.container').style.borderRadius = radiusInput;
}

function backgroundReturn(){
	let tag = document.querySelector('style#backgroundColor');
	
	tag.innerHTML = ".container {animation-name: colorCycle; animation-iteration-count: infinite;}";

	document.querySelector('button[onclick="backgroundReturn()"]').style.display = "none";
}

function seizureControl(){
	let input = document.querySelector('input#seizureControl').value;
	let period = (20000-input)/1000;
	
	let tag = document.querySelector('style#seizureControl');
	
	tag.innerHTML = ".container {animation-duration:" + period + "s}";
}



</script>
</head>

<body>
<div class="container">

<h1>Some Cool JS Functions</h1>

<br /><br />
<hr />
<br /><br />

<!-- background color -->

<p>Background colour of container: <input id="BGCTag" type="color" onchange="changeBackground()" oninput="changeBackground()" value="#bbffdd"/> &nbsp; <button onclick="backgroundReturn()">Return to Cycle</button></p>

<p>Seizure Control: <input id="seizureControl" onchange="seizureControl()" type="range" value="0" min="0" max="19900" step="100"/></p>

<p>Colour of text: <input id="TCTag" type="color" value="#000000" onchange="changeText()" oninput="changeText()" /></p>

<p>Border Radius: <input id="radiusInput" type="range" min="0" max="100" value="3" onchange="changeRadius()"oninput="changeRadius()" /></p>

<br /><br />
<hr />
<br /><br />

<!-- leap years! -->

<h3>Leap Years</h3>

<input id="input" type="number" placeholder="Year" />&nbsp;<button onclick="fill()">Go</button>
<br /><br />
<input type="text" id="output" />

<br /><br />
<hr />
<br /><br />

<!-- calculator! -->

<h3>Calculator</h3>

<p><label for="one">1st Number:</label><input id="one" type="number" /></p>
<p><label for="two">2nd Number:</label><input id="two" type="number" /></p>
<p><button onclick="multiply()">Multiply</button>&nbsp;<button onclick="divide()">Divide</button>
<p><label for="result">Result:</label><input id="result" type="text" disabled style="border:none" /></p>

<br /><br />
<hr />
<br /><br />

<h3>Temperature Conversion</h3>

<!-- [ Formula : c/5 = (f-32)/9 [ where c = temperature in Celsius and f = temperature in Fahrenheit ] -->

<p><label for="Celsius">Celsius:</label><input id="celsius" type="text" onkeyup="calcF()"/>&nbsp;&nbsp;&nbsp;<label for="Celsius">Fahrenheit:</label><input id="fahrenheit" type="text" onkeyup="calcC()" /></p>

<br /><br />
<hr />
<br /><br />

<!-- table creation--><h3>Table Creation/Destruction</h3>

<p><label for="rows">Rows:</label>&nbsp;<input id="rows" type="number" />&nbsp;&nbsp;&nbsp;<label for="columns">Columns</label>&nbsp;<input id="columns" type="number" />&nbsp;&nbsp;&nbsp;<button onclick="tableCreate()">Create!</button>&nbsp;<button onclick="tableDestroy()">Destroy!</button>&nbsp;<span class="error">ERROR!</span></p>

<div id="tables"></div>

<br /><br />
<hr />
<br /><br />

<!-- cutting words in half -->

<h3>Cutting words in half</h3>

<p><label for="wordCutter" >Word to be cut:</label>&nbsp;<input placeholder="Insert word here" type="text" id="wordCutter">&nbsp;<button onclick="cut()">Cut</button>
<br />
<p>Results: <input disabled type="text" id="cutResult1" />&nbsp;<input disabled type="text" id="cutResult2" /> 

<br /><br />
<hr />
<br /><br />

<!-- remove items from list -->

<h3>Select list addition and removal</h3>

<p><select id="mySelect">
	<option>Blue</option>
	<option>Red</option>
	<option>Green</option>
	<option>Yellow</option>
</select>
<button onclick="remove()">Remove</button></p>


<p><input type="text" id="addToSelect" />&nbsp;<button onclick="add()">Add</button></p>

<br /><br />
<hr />
<br /><br />

<!-- find highest in array -->

<h3>Finding highest and lowest values in array</h3>

<p>Number of elements: <input type="number" id="arraySize" class="arrayInput" />&nbsp; <button onclick="arrayGen()">Generate</button></p>

<p>Input [ <span id="arrayLocation"></span> ]
			&nbsp;
			<button onclick="arrayHighest()">Find Highest</button>&nbsp;Highest:<input class="arrayInput centered blackText" type="text" disabled id="arrayHighest" />
			&nbsp;
			<button onclick="arrayLowest()">Find Lowest</button>&nbsp;Lowest:<input class="arrayInput centered blackText" type="text" disabled id="arrayLowest" />
			</p>

<br /><br />
<hr />
<br /><br />

<!-- Factors -->

<h3>Factors and Perfect Numbers</h3>

<p><label for="">Please input a number:</label>&nbsp;<input class="smallInput" id="factorInput" type="number" />&nbsp;<button onclick="getFactors()">Get Factors</button></p>
<p><label for="factors">Factors:</label>&nbsp;<input class="blackText factorResult" disabled id="factors" type="text" /></p>
<p><label for="perfect">Perfect Number? (<i>equal to sum of factors</i>)</label>&nbsp;<input class="blackText factorResult" disabled id="perfect" type="text" /></p>

<br /><br />
<hr />
<br /><br />

<!-- Roman Numerals -->

<h3>Roman Numeral Converter</h3>

<p>Number: <input type="text" id="number" onkeyup="romanConvert()" /> Roman Numerals:<input id="roman" type="text" onkeyup="numberConvert()" disabled /></p>

<br /><br />
<hr />
<br /><br />

<!-- fizz buzz -->

<h3>Fizz Buzz</h3>

<p>For multiples of &nbsp;<input id="fizzBuzzNumberOne" type="range" min="1" max="30" oninput="range1()" onchange="range1()" value="15" />&nbsp;<input type="text" disabled id="rangeReader1" value="15" />, print <input id="fizzBuzzWordOne" type="text" placeholder="Fizz" />.</p> 
<p>For multiples of &nbsp;<input id="fizzBuzzNumberTwo" type="range" min="1" max="30" oninput="range2()" onchange="range2()" value="15" />&nbsp;<input type="text" disabled id="rangeReader2" value="15" />, print <input id="fizzBuzzWordTwo" type="text" placeholder="Buzz" />.</p>
<p>Run up to &nbsp;<input id="fizzBuzzUpTo" type="range" min="0" max="250" oninput="range3()" onchange="range3()" value="125" />&nbsp;<input type="text" disabled id="rangeReader3" value="125" />&nbsp;<button onclick="fizzBuzz()">Go</button></p>

<div id="fizzBuzzOutput"></div>

<br /><br />
<hr />
<br /><br />

<!-- Christmas Tree -->

<h3>Christmas Tree</h3>

<p>How tall would you like your Christmas tree? <input type="number" id="xmasHeight" value="7" />units &nbsp; <button onclick="buildXmasTree()">Build</button></p>

<div id="xmasTree"></div>

<br /><br />

<br /><br />

</div>

</body>